(this["webpackJsonpapp-desktop"]=this["webpackJsonpapp-desktop"]||[]).push([[11],{433:function(e,t,n){"use strict";n.r(t),n.d(t,"WidgetWrapper",(function(){return D})),n.d(t,"IconDiv",(function(){return C})),n.d(t,"WidgetContainer",(function(){return R})),n.d(t,"ModalBackground",(function(){return F})),n.d(t,"SearchContainer",(function(){return B})),n.d(t,"SettingsDiv",(function(){return L})),n.d(t,"WidgetList",(function(){return U})),n.d(t,"SettingsDialog",(function(){return A})),n.d(t,"SearchBox",(function(){return K})),n.d(t,"SearchResults",(function(){return N})),n.d(t,"SearchHistory",(function(){return W}));var c,r,o,i,a,l,s=n(7),u=n(9),d=n(24),h=n(14),f=n(0),j=n.n(f),b=n(8),g=n(3),x=n(91),p=n(434),O=n.n(p),v=n(255),m=n.n(v),w=n(256),S=n.n(w),y=function(e){var t=Object(f.useState)(null),n=Object(u.a)(t,2),c=n[0],r=n[1],o=Object(f.useState)(null),i=Object(u.a)(o,2),a=i[0],l=i[1],s=Object(f.useState)(null),d=Object(u.a)(s,2),h=d[0],j=d[1],b=Object(f.useState)(e),g=Object(u.a)(b,2),x=g[0],p=g[1];return console.log("FETCH ",x),Object(f.useEffect)((function(){x&&(j(!0),r(null),l(null),fetch(x).then((function(e){return e.json()})).then((function(e){j(!1),r(e)})).catch((function(e){j(!1),l(e)})))}),[x]),{data:c,error:a,isLoading:h,setUrl:p}},I=n(22),z=n(5),T=n(1084),k=n.n(T),E=(n(1086),n(1));z.a.init();var D=b.default.div(c||(c=Object(h.a)(["\n  margin: 10px;\n  border: 2px outset;\n  border-radius: 8px;\n  min-height: 200px;\n  min-width: 200px;\n"]))),C=b.default.div(r||(r=Object(h.a)(["\n  height: 24px;\n  position: relative;\n  left: 197px;\n  top: 23px;\n  opacity: 0;\n  cursor: ",";\n  &:hover {\n    opacity: ",";\n  }\n"])),(function(e){return e.open?"default":"pointer"}),(function(e){return e.open?0:1})),R=Object(b.default)(g.Flex)(o||(o=Object(h.a)(["\n  /*\nwidth: 100%;\nheight: 100vh;\ndisplay: flex;\n*/\n  flex-wrap: wrap;\n  flex-direction: row;\n  align-content: flex-start;\n  justify-content: flex-start;\n  position: relative;\n  top: 0px;\n  left: 0px;\n  overflow-y: auto;\n"]))),F=b.default.div(i||(i=Object(h.a)(["\n  width: 100%;\n  height: 100vh;\n  z-index: 5;\n  background-color: rgba(30, 29, 29, 0.3);\n  position: absolute;\n  left: 0;\n  top: 0;\n"]))),B=b.default.div(a||(a=Object(h.a)(["\n  width: ","px;\n  /* height: 100vh; */\n  max-height: 400px;\n  overflow-y: auto;\n  z-index: 20;\n  background-color: white;\n  position: absolute;\n  left: ","px;\n  top: ","px;\n  padding-top: 10px;\n  padding-left: 10px;\n  padding-right: 10px;\n"])),(function(e){return e.width}),(function(e){return e.left}),(function(e){return e.top})),L=b.default.div(l||(l=Object(h.a)(["\n  background-color: white;\n\n  width: 100%;\n  height: 100%;\n  border: 2px outset;\n  border-radius: 8px;\n  z-index: 10;\n"]))),U=j.a.memo((function(e){var t=e.widgetList,n=e.widgetData;return console.log("WIDGET LIST ",t),console.log("WIDGET DATA",n),Object(E.jsx)(E.Fragment,{children:t.map((function(e,t){return Object(E.jsx)(e,{data:{settings:n[t].currentSetting}},"prifina-widget-"+t)}))})})),A=function(e){var t=e.widgetIndex,n=e.widgetSetting,c=e.onUpdate,r=Object(d.a)(e,["widgetIndex","widgetSetting","onUpdate"]);console.log("SETTINGS ",t,n);var o=Object(f.useRef)({}),i=Object(f.useRef)([]),a=Object(f.useRef)(),l=Object(f.useState)(!1),s=Object(u.a)(l,2),h=s[0],b=s[1];Object(f.useEffect)((function(){Object.keys(n.currentSetting).forEach((function(e){o.current[e]=n.currentSetting[e]})),console.log("FLDS ",o),console.log("DIALOG ",r);var e=[];n.settings.forEach((function(t){console.log(t),-1===e.indexOf(t.type)&&e.push(t.type)})),e.indexOf("TZ")>-1&&k.a.tz.names().forEach((function(e){i.current.push({text:e+": "+k.a.tz(e).format("Z"),tz:e,offset:k.a.tz(e).utcOffset()})})),b(!0)}),[]);var p=Object(x.a)(o.current),O=Object(u.a)(p,2),v=O[0],m=O[1];if(console.log("RENDER FIELDS ",v,o),i.current.length>0){var w=k.a.tz(v.tz).utcOffset();console.log("TZ ",o,w),w!==o.current.offset&&(o.current.offset=w,o.current.tz=v.tz,console.log("INPUT ",a),a.current&&(a.current.value=w),m({target:{id:"offset",value:w}}))}return Object(E.jsxs)(g.Box,{m:2,children:[Object(E.jsx)(g.Text,{textStyle:"h3",textAlign:"center",mt:10,children:n.title}),Object(E.jsx)(g.Divider,{}),h&&Object(E.jsxs)(g.Box,{mt:10,ml:5,mr:5,children:[n.settings.map((function(e,t){return Object(E.jsxs)(j.a.Fragment,{children:["text"===e.type&&Object(E.jsx)(g.Input,{mt:15,placeholder:e.label,mb:2,id:e.value,name:e.value,defaultValue:v[e.value],onChange:m,ref:a},"widget-setting-"+t),"TZ"===e.type&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(g.Label,{mt:10,children:e.label},"setting-label-"+t),Object(E.jsx)(g.Select,{mb:10,size:"sm",id:e.value,name:e.value,defaultValue:v[e.value],onChange:m,children:i.current.map((function(e,n){return Object(E.jsx)("option",{value:e.tz,children:e.text},"widget-setting-"+t+"-"+n)}))},"widget-setting-"+t)]})]},"settings-"+t)})),Object(E.jsx)(g.Box,{mt:10,children:Object(E.jsx)(g.Button,{width:"100%",onClick:function(e){console.log("UPDATE BUTTON ",v),i.length>0&&v.hasOwnProperty("tz")?c({tz:v.tz,offset:k.a.tz(v.tz).utcOffset()}):c(v)},children:"Update"})})]})]})},K=Object(f.forwardRef)((function(e,t){var n=e.showHistory,c=e.chevronOpen,r=e.searchKey,o=e.searchOpen,i=e.saveSearchKey,a=Object(x.a)({search:""}),l=Object(u.a)(a,2),s=l[0],d=l[1],h=Object(f.useRef)();return Object(E.jsx)(g.Box,{ml:10,mr:10,ref:t,children:Object(E.jsxs)(g.IconField,{children:[Object(E.jsx)(g.IconField.LeftIcon,{iconify:O.a,color:"componentPrimary",size:"17"}),Object(E.jsx)(g.IconField.InputField,{ref:h,autoFocus:!0,placeholder:z.a.__("Search"),id:"search",name:"search",onChange:d,onKeyDown:function(e){"Enter"===e.key&&(i(s.search),r(s.search))}}),Object(E.jsx)(g.Box,{display:"inline-flex",onClick:function(){o||n((function(e){return!e})),h.current.value="",r("")},children:Object(E.jsx)(g.IconField.RightIcon,{iconify:c||o?m.a:S.a,color:"componentPrimary",size:"17"})})]})})})),N=function(e){var t=e.searchBox,n=e.searchKey,c=e.roleKey,r=e.saveSearchResult,o=t.current.getBoundingClientRect(),i={width:o.width,left:o.left,top:o.top+o.height+5};console.log(i),console.log("NEW SEARCH ",n);var a=Object(f.useState)(null),l=Object(u.a)(a,2),d=l[0],h=l[1],j=y(),b=j.data,x=j.error,p=j.isLoading,O=j.setUrl;return Object(f.useEffect)((function(){if(p||O("".concat(I.b,"?cx=").concat(I.c,"&exactTerms=").concat(c.length>0?encodeURIComponent(c):"","&q=").concat(encodeURIComponent(n),"&lr=lang_en&key=").concat(I.a)),x&&h(Object(E.jsxs)("h2",{children:["Error when fetching: ",x]})),!b&&p&&h(Object(E.jsx)("h2",{children:"LOADING..."})),b||p||h(null),b){console.log(b);var e=b.items.map((function(e,t){return Object(E.jsxs)("li",{children:[Object(E.jsx)("div",{children:Object(E.jsx)("a",{href:e.link,"data-link":t,onClick:function(e){var t=parseInt(e.currentTarget.dataset.link);console.log("LINK CLICK ",b.items[t]),r(n,b.items[t])},target:"_blank",children:e.title})}),Object(E.jsx)("div",{style:{fontSize:"0.75rem"},children:e.snippet})]},"search-result-"+t)}));h(Object(E.jsx)("ol",{children:e}))}}),[n,x,p,b]),Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B,Object(s.a)(Object(s.a)({},i),{},{children:[Object(E.jsx)(g.Text,{textStyle:"h4",children:"Search results"}),Object(E.jsx)(g.Divider,{}),d]}))})},W=function(e){var t=e.searchBox;console.log("HISTORY ",t);var n=t.current.getBoundingClientRect(),c={width:n.width,left:n.left,top:n.top+n.height+5};console.log(c);var r=[];return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B,Object(s.a)(Object(s.a)({},c),{},{children:[Object(E.jsx)(g.Text,{textStyle:"h4",children:"Search history"}),Object(E.jsx)(g.Divider,{}),Object(E.jsx)("ol",{children:r.length>0&&r.map((function(e,t){return Object(E.jsx)("li",{children:e.search},"search-"+t)}))})]}))})}}}]);
//# sourceMappingURL=11.e5542747.chunk.js.map